const net_queue=require('./net_queue');const amf=require('./AMF/amf');let connect=cc['Class']({'properties':{'net_status':{'default':null,'type':cc['Label']}},'ctor':function(){this['_is_connected']=![];},'init':function(_0x3e1ba5){this['_wsiSendBinary']=null;this['url']=_0x3e1ba5;},'bytesToInt2':function(_0x37a603,_0x257873){var _0x4880c4={'WFPjr':function(_0x53878e,_0x4716e4){return _0x53878e|_0x4716e4;},'gCzah':function(_0x5a601e,_0x37330f){return _0x5a601e<<_0x37330f;}};let _0xdf5c5b=_0x4880c4['WFPjr'](_0x37a603,_0x4880c4['gCzah'](_0x257873,0x8));return _0xdf5c5b;},'close':function(){this['_wsiSendBinary']['close']();},'set_disconnected':function(){this['_is_connected']=![];},'is_connected':function(){return this['_is_connected'];},'connect_to':function(_0x5cbd05){var _0x5f0a11={'lvcsE':function(_0x876afe,_0x5965a3){return _0x876afe==_0x5965a3;},'lTnBL':function(_0x1f7f2c,_0x4b5278){return _0x1f7f2c!=_0x4b5278;},'xQDMw':'WebSocket\x0a发送二进制WS已打开.','KSOTg':function(_0x74b844,_0x15c052){return _0x74b844<_0x15c052;},'OxtaL':function(_0x584d3b,_0x143812){return _0x584d3b!=_0x143812;},'IEoNE':'WebSocket\x0a收到响应.','YMuUD':function(_0x4e20b4,_0x481bee){return _0x4e20b4!=_0x481bee;},'ZNidY':'WebSocket\x0a发送二进制遇到错误.','IZgVp':'WebSocket\x0awebsocket\x20实例已关闭.','UGgnh':function(_0x7b0e87,_0x1ab516){return _0x7b0e87==_0x1ab516;},'TXzeq':'arraybuffer'};if(_0x5f0a11['UGgnh'](this['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}this['init'](_0x5cbd05);let _0x2f2fec=this['net_status'];let _0xe39cdb=this;this['_wsiSendBinary']=new WebSocket(this['url']);this['_wsiSendBinary']['binaryType']=_0x5f0a11['TXzeq'];this['_wsiSendBinary']['onopen']=function(_0x4749a8){if(_0x5f0a11['lvcsE'](_0xe39cdb['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}_0xe39cdb['_is_connected']=!![];net_queue['instance']()['push'](0xa,'');if(_0x5f0a11['lTnBL'](_0x2f2fec,null)){_0x2f2fec['string']=_0x5f0a11['xQDMw'];}};this['_wsiSendBinary']['onmessage']=function(_0x5250e2){let _0x37bc41=new Uint8Array(_0x5250e2['data']);let _0x538f1c=_0xe39cdb['bytesToInt2'](_0x37bc41[0x0],_0x37bc41[0x1]);let _0x4522bb='';for(let _0x73a085=0x2;_0x5f0a11['KSOTg'](_0x73a085,_0x37bc41['length']);_0x73a085++){_0x4522bb+=String['fromCharCode'](_0x37bc41[_0x73a085]);}net_queue['instance']()['push'](_0x538f1c,_0x4522bb);if(_0x5f0a11['OxtaL'](_0x2f2fec,null)){_0x2f2fec['string']=_0x5f0a11['IEoNE'];}};this['_wsiSendBinary']['onerror']=function(_0x4ec5c1){_0xe39cdb['_is_connected']=![];net_queue['instance']()['push'](0xc,'');if(_0x5f0a11['YMuUD'](_0x2f2fec,null)){_0x2f2fec['string']=_0x5f0a11['ZNidY'];}};this['_wsiSendBinary']['onclose']=function(_0x581e55){_0xe39cdb['_is_connected']=![];net_queue['instance']()['push'](0xb,'');if(_0x5f0a11['YMuUD'](_0x2f2fec,null)){_0x2f2fec['string']=_0x5f0a11['IZgVp'];}_0xe39cdb['_wsiSendBinary']=null;};},'sendWebSocketBinary':function(_0x10926b){var _0x3326d7={'vbCfs':function(_0x504226,_0xc77eb9){return _0x504226===_0xc77eb9;},'DtDWv':function(_0x30f9f4,_0x237564){return _0x30f9f4!=_0x237564;},'VMUGV':'WebSocket\x0a发送二进制WS等待中...','maKmM':'send\x20binary\x20websocket\x20instance\x20wasn\x27t\x20ready...','ExZia':function(_0x27f907,_0x3a31f8){return _0x27f907+_0x3a31f8;},'qiMHf':'WebSocket\x0a'};if(!this['_wsiSendBinary']){return;}let _0x5aedf6=this['net_status'];if(_0x3326d7['vbCfs'](this['_wsiSendBinary']['readyState'],WebSocket['OPEN'])){if(_0x3326d7['DtDWv'](_0x5aedf6,null)){_0x5aedf6['string']=_0x3326d7['VMUGV'];}this['_wsiSendBinary']['send'](_0x10926b);}else{let _0x45ed61=_0x3326d7['maKmM'];if(_0x3326d7['DtDWv'](_0x5aedf6,null)){_0x5aedf6['string']=_0x3326d7['ExZia'](_0x3326d7['qiMHf'],_0x45ed61);}}},'send_cmd':function(_0xcdc8d6,_0x2bf157){var _0x10adef={'RbrOC':function(_0xd53b69,_0x1ee23f){return _0xd53b69>_0x1ee23f;},'WLvFP':function(_0x332c9b,_0x379fcb){return _0x332c9b+_0x379fcb;},'bhdmw':'parameter\x20Length:','AvoZJ':',must\x20be\x20less\x20than\x201000!!!'};if(_0x10adef['RbrOC'](_0x2bf157['length'],0x3e8)){throw new Error(_0x10adef['WLvFP'](_0x10adef['WLvFP'](_0x10adef['bhdmw'],_0x2bf157['length']),_0x10adef['AvoZJ']));}let _0x4f110b=amf['get_send_uint8_array'](_0xcdc8d6,_0x2bf157);this['sendWebSocketBinary'](_0x4f110b['buffer']);},'uuid':function(_0x2c53e9,_0x366fa3){var _0x503887={'pGITq':'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz','pbjTH':function(_0x34eea3,_0xd868d4){return _0x34eea3<_0xd868d4;},'ZdACl':function(_0x4e181,_0x52569e){return _0x4e181|_0x52569e;},'OAXaU':function(_0x5ca57c,_0x18e11a){return _0x5ca57c*_0x18e11a;},'fAyri':function(_0x13264f,_0x538d77){return _0x13264f|_0x538d77;},'pRaXd':function(_0x40da95,_0x453ec2){return _0x40da95==_0x453ec2;},'ROdLd':function(_0x81f2b1,_0x4575f2){return _0x81f2b1&_0x4575f2;}};let _0x242d71=_0x503887['pGITq']['split']('');let _0x1e668f=[],_0x1245e8;_0x366fa3=_0x366fa3||_0x242d71['length'];if(_0x2c53e9){for(_0x1245e8=0x0;_0x503887['pbjTH'](_0x1245e8,_0x2c53e9);_0x1245e8++)_0x1e668f[_0x1245e8]=_0x242d71[_0x503887['ZdACl'](0x0,_0x503887['OAXaU'](Math['random'](),_0x366fa3))];}else{let _0x36649f;_0x1e668f[0x8]=_0x1e668f[0xd]=_0x1e668f[0x12]=_0x1e668f[0x17]='-';_0x1e668f[0xe]='4';for(_0x1245e8=0x0;_0x503887['pbjTH'](_0x1245e8,0x24);_0x1245e8++){if(!_0x1e668f[_0x1245e8]){_0x36649f=_0x503887['fAyri'](0x0,_0x503887['OAXaU'](Math['random'](),0x10));_0x1e668f[_0x1245e8]=_0x242d71[_0x503887['pRaXd'](_0x1245e8,0x13)?_0x503887['fAyri'](_0x503887['ROdLd'](_0x36649f,0x3),0x8):_0x36649f];}}}return _0x1e668f['join']('');}});connect['_instance']=null;connect['instance']=function(){if(!connect['_instance']){connect['_instance']=new connect();}return connect['_instance'];};