const net_queue=require('./net_queue');const amf=require('./AMF/amf');var connect=cc['Class']({'properties':{'net_status':{'default':null,'type':cc['Label']}},'ctor':function(){this['is_connected']=![];},'init':function(_0x5e4cd9){this['_wsiSendBinary']=null;this['url']=_0x5e4cd9;},'bytesToInt2':function(_0x2f5444,_0x33d4a4){var _0x5d6a6e={'YJSmw':function(_0xf127c6,_0x4942ac){return _0xf127c6|_0x4942ac;},'pvnTC':function(_0x4e54dc,_0x199944){return _0x4e54dc<<_0x199944;}};var _0x1e0616=_0x5d6a6e['YJSmw'](_0x2f5444,_0x5d6a6e['pvnTC'](_0x33d4a4,0x8));return _0x1e0616;},'close':function(){this['_wsiSendBinary']['close']();},'connect_to':function(_0x1d17fe){var _0x46dcda={'hJGCw':'6|10|5|4|0|3|7|8|2|1|9','qsfwC':function(_0x28c6d8,_0x1298da){return _0x28c6d8==_0x1298da;},'NyDjG':function(_0xd62104,_0x18f9a9){return _0xd62104!=_0x18f9a9;},'UZzXF':'WebSocket\x0a发送二进制WS已打开.','OImMD':'1|5|3|0|2|4','knSKt':function(_0x1a8a4f,_0x20b85f){return _0x1a8a4f<_0x20b85f;},'iPrAd':'WebSocket\x0a收到响应.','caJti':'WebSocket\x0a发送二进制遇到错误.','RBdIE':'WebSocket\x0awebsocket\x20实例已关闭.','pgJvN':'arraybuffer','Ikbwo':function(_0x367f71,_0x125591){return _0x367f71==_0x125591;}};var _0x146805=_0x46dcda['hJGCw']['split']('|'),_0x55e3f3=0x0;while(!![]){switch(_0x146805[_0x55e3f3++]){case'0':var _0x53c892=this;continue;case'1':this['_wsiSendBinary']['onerror']=function(_0x45cee6){_0x53c892['is_connected']=![];net_queue['instance']()['push'](0xc,'');if(_0x35e53e['AiQFR'](_0x1f19f9,null)){_0x1f19f9['string']=_0x35e53e['kXwkf'];}};continue;case'2':this['_wsiSendBinary']['onmessage']=function(_0x538139){var _0x4e65ab=_0x35e53e['iiIys']['split']('|'),_0x578601=0x0;while(!![]){switch(_0x4e65ab[_0x578601++]){case'0':for(var _0x552e37=0x2;_0x35e53e['bHcSn'](_0x552e37,_0x349f44['length']);_0x552e37++){_0x3ccf27+=String['fromCharCode'](_0x349f44[_0x552e37]);}continue;case'1':var _0x349f44=new Uint8Array(_0x538139['data']);continue;case'2':net_queue['instance']()['push'](_0x4433d2,_0x3ccf27);continue;case'3':var _0x3ccf27='';continue;case'4':if(_0x35e53e['AiQFR'](_0x1f19f9,null)){_0x1f19f9['string']=_0x35e53e['GVZpT'];}continue;case'5':var _0x4433d2=_0x53c892['bytesToInt2'](_0x349f44[0x0],_0x349f44[0x1]);continue;}break;}};continue;case'3':this['_wsiSendBinary']=new WebSocket(this['url']);continue;case'4':var _0x1f19f9=this['net_status'];continue;case'5':this['init'](_0x1d17fe);continue;case'6':var _0x35e53e={'EQCEn':function(_0x303fcf,_0x49d4ec){return _0x46dcda['qsfwC'](_0x303fcf,_0x49d4ec);},'Slaum':function(_0x2c6275,_0x2d91e5){return _0x46dcda['NyDjG'](_0x2c6275,_0x2d91e5);},'hdzMn':_0x46dcda['UZzXF'],'iiIys':_0x46dcda['OImMD'],'bHcSn':function(_0x5d3620,_0x4c2dfe){return _0x46dcda['knSKt'](_0x5d3620,_0x4c2dfe);},'AiQFR':function(_0x543a0f,_0x235f6c){return _0x46dcda['NyDjG'](_0x543a0f,_0x235f6c);},'GVZpT':_0x46dcda['iPrAd'],'kXwkf':_0x46dcda['caJti'],'AHsNd':function(_0x354a96,_0x5d6e33){return _0x46dcda['NyDjG'](_0x354a96,_0x5d6e33);},'jTGzA':_0x46dcda['RBdIE']};continue;case'7':this['_wsiSendBinary']['binaryType']=_0x46dcda['pgJvN'];continue;case'8':this['_wsiSendBinary']['onopen']=function(_0x53e716){if(_0x35e53e['EQCEn'](_0x53c892['is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}_0x53c892['is_connected']=!![];net_queue['instance']()['push'](0xa,'');if(_0x35e53e['Slaum'](_0x1f19f9,null)){_0x1f19f9['string']=_0x35e53e['hdzMn'];}};continue;case'9':this['_wsiSendBinary']['onclose']=function(_0xeb80d5){_0x53c892['is_connected']=![];net_queue['instance']()['push'](0xb,'');if(_0x35e53e['AHsNd'](_0x1f19f9,null)){_0x1f19f9['string']=_0x35e53e['jTGzA'];}_0x53c892['_wsiSendBinary']=null;};continue;case'10':if(_0x46dcda['Ikbwo'](this['is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}continue;}break;}},'sendWebSocketBinary':function(_0x26da01){var _0x5bc994={'gcJJI':function(_0xaff934,_0x43bb11){return _0xaff934===_0x43bb11;},'cdtZh':function(_0x4ed976,_0x3e21af){return _0x4ed976!=_0x3e21af;},'XKYAw':'WebSocket\x0a发送二进制WS等待中...','rtVeO':'send\x20binary\x20websocket\x20instance\x20wasn\x27t\x20ready...','jggvC':function(_0x437b4a,_0x4e97bf){return _0x437b4a!=_0x4e97bf;},'nZPFz':function(_0x578f62,_0x4af707){return _0x578f62+_0x4af707;},'OWLfD':'WebSocket\x0a'};if(!this['_wsiSendBinary']){return;}var _0x31a42e=this['net_status'];if(_0x5bc994['gcJJI'](this['_wsiSendBinary']['readyState'],WebSocket['OPEN'])){if(_0x5bc994['cdtZh'](_0x31a42e,null)){_0x31a42e['string']=_0x5bc994['XKYAw'];}this['_wsiSendBinary']['send'](_0x26da01);}else{var _0x3e91f0=_0x5bc994['rtVeO'];if(_0x5bc994['jggvC'](_0x31a42e,null)){_0x31a42e['string']=_0x5bc994['nZPFz'](_0x5bc994['OWLfD'],_0x3e91f0);}}},'send_cmd':function(_0x155772,_0xd93532){var _0x40e992={'FcRap':function(_0x13c2be,_0x116ced){return _0x13c2be>_0x116ced;},'YpWKY':function(_0x987c7d,_0x5798f2){return _0x987c7d+_0x5798f2;},'OZUGt':'parameter\x20Length:','BxBqN':',must\x20be\x20less\x20than\x201000!!!'};if(_0x40e992['FcRap'](_0xd93532['length'],0x3e8)){throw new Error(_0x40e992['YpWKY'](_0x40e992['YpWKY'](_0x40e992['OZUGt'],_0xd93532['length']),_0x40e992['BxBqN']));}var _0x463111=amf['get_send_uint8_array'](_0x155772,_0xd93532);this['sendWebSocketBinary'](_0x463111['buffer']);}});connect['_instance']=null;connect['instance']=function(){if(!connect['_instance']){connect['_instance']=new connect();}return connect['_instance'];};