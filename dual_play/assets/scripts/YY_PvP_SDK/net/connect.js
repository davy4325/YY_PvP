const net_queue=require('./net_queue');const amf=require('./AMF/amf');var connect=cc['Class']({'properties':{'net_status':{'default':null,'type':cc['Label']}},'ctor':function(){this['_is_connected']=![];},'init':function(_0x38f292){this['_wsiSendBinary']=null;this['url']=_0x38f292;},'bytesToInt2':function(_0x19a9cd,_0x38f5c5){var _0x15ae50={'tFGIf':function(_0x3d21be,_0x2f6e2a){return _0x3d21be|_0x2f6e2a;},'tJhEK':function(_0x17c82e,_0x5d30c4){return _0x17c82e<<_0x5d30c4;}};var _0x5abbef=_0x15ae50['tFGIf'](_0x19a9cd,_0x15ae50['tJhEK'](_0x38f5c5,0x8));return _0x5abbef;},'close':function(){this['_wsiSendBinary']['close']();},'set_disconnected':function(){this['_is_connected']=![];},'is_connected':function(){return this['_is_connected'];},'connect_to':function(_0x173b44){var _0x2df563={'ivzGB':'4|8|7|3|2|0|9|10|6|1|5','Odwwe':function(_0xa3f553,_0x53c2f5){return _0xa3f553==_0x53c2f5;},'ZlgzO':function(_0x1db4c3,_0x2cbf42){return _0x1db4c3!=_0x2cbf42;},'fKkIp':'WebSocket\x0a发送二进制WS已打开.','OItay':'0|5|1|4|3|2','UFkfS':'WebSocket\x0a收到响应.','fPsLF':function(_0x3dded3,_0x555f68){return _0x3dded3<_0x555f68;},'lsQBG':'WebSocket\x0a发送二进制遇到错误.','gTQIL':function(_0x1e8b2f,_0x13de3b){return _0x1e8b2f!=_0x13de3b;},'KGakH':'WebSocket\x0awebsocket\x20实例已关闭.','kJibP':'arraybuffer'};var _0x76904c=_0x2df563['ivzGB']['split']('|'),_0x574f45=0x0;while(!![]){switch(_0x76904c[_0x574f45++]){case'0':this['_wsiSendBinary']=new WebSocket(this['url']);continue;case'1':this['_wsiSendBinary']['onerror']=function(_0x47a79f){_0x4acd46['_is_connected']=![];net_queue['instance']()['push'](0xc,'');if(_0x555728['zDmPQ'](_0x51b01c,null)){_0x51b01c['string']=_0x555728['JWubQ'];}};continue;case'2':var _0x4acd46=this;continue;case'3':var _0x51b01c=this['net_status'];continue;case'4':var _0x555728={'YLWNl':function(_0x37c434,_0x22b940){return _0x2df563['Odwwe'](_0x37c434,_0x22b940);},'zDmPQ':function(_0x2ae25c,_0x49480e){return _0x2df563['ZlgzO'](_0x2ae25c,_0x49480e);},'oofMq':_0x2df563['fKkIp'],'uBNjh':_0x2df563['OItay'],'MqsJL':_0x2df563['UFkfS'],'VWbvc':function(_0x1af944,_0x157ced){return _0x2df563['fPsLF'](_0x1af944,_0x157ced);},'JWubQ':_0x2df563['lsQBG'],'JmgmQ':function(_0x2a707f,_0x2a20ca){return _0x2df563['gTQIL'](_0x2a707f,_0x2a20ca);},'fwCfP':_0x2df563['KGakH']};continue;case'5':this['_wsiSendBinary']['onclose']=function(_0x53819b){_0x4acd46['_is_connected']=![];net_queue['instance']()['push'](0xb,'');if(_0x555728['JmgmQ'](_0x51b01c,null)){_0x51b01c['string']=_0x555728['fwCfP'];}_0x4acd46['_wsiSendBinary']=null;};continue;case'6':this['_wsiSendBinary']['onmessage']=function(_0x384fab){var _0x1a9770=_0x555728['uBNjh']['split']('|'),_0x502df5=0x0;while(!![]){switch(_0x1a9770[_0x502df5++]){case'0':var _0x30db0b=new Uint8Array(_0x384fab['data']);continue;case'1':var _0x4282f6='';continue;case'2':if(_0x555728['zDmPQ'](_0x51b01c,null)){_0x51b01c['string']=_0x555728['MqsJL'];}continue;case'3':net_queue['instance']()['push'](_0x68f02f,_0x4282f6);continue;case'4':for(var _0x1dacbd=0x2;_0x555728['VWbvc'](_0x1dacbd,_0x30db0b['length']);_0x1dacbd++){_0x4282f6+=String['fromCharCode'](_0x30db0b[_0x1dacbd]);}continue;case'5':var _0x68f02f=_0x4acd46['bytesToInt2'](_0x30db0b[0x0],_0x30db0b[0x1]);continue;}break;}};continue;case'7':this['init'](_0x173b44);continue;case'8':if(_0x2df563['Odwwe'](this['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}continue;case'9':this['_wsiSendBinary']['binaryType']=_0x2df563['kJibP'];continue;case'10':this['_wsiSendBinary']['onopen']=function(_0x5528e0){if(_0x555728['YLWNl'](_0x4acd46['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}_0x4acd46['_is_connected']=!![];net_queue['instance']()['push'](0xa,'');if(_0x555728['zDmPQ'](_0x51b01c,null)){_0x51b01c['string']=_0x555728['oofMq'];}};continue;}break;}},'sendWebSocketBinary':function(_0xaa215b){var _0x385ce6={'LOQop':function(_0x212e29,_0xbd341f){return _0x212e29===_0xbd341f;},'rCWPB':function(_0x175c4f,_0x5a5289){return _0x175c4f!=_0x5a5289;},'yHyRN':'WebSocket\x0a发送二进制WS等待中...','CGNer':'send\x20binary\x20websocket\x20instance\x20wasn\x27t\x20ready...','sFRni':function(_0x48572d,_0x4a5072){return _0x48572d+_0x4a5072;},'BVOXg':'WebSocket\x0a'};if(!this['_wsiSendBinary']){return;}var _0x3ca38c=this['net_status'];if(_0x385ce6['LOQop'](this['_wsiSendBinary']['readyState'],WebSocket['OPEN'])){if(_0x385ce6['rCWPB'](_0x3ca38c,null)){_0x3ca38c['string']=_0x385ce6['yHyRN'];}this['_wsiSendBinary']['send'](_0xaa215b);}else{var _0x55929e=_0x385ce6['CGNer'];if(_0x385ce6['rCWPB'](_0x3ca38c,null)){_0x3ca38c['string']=_0x385ce6['sFRni'](_0x385ce6['BVOXg'],_0x55929e);}}},'send_cmd':function(_0x5a63ee,_0x352fcc){var _0x519749={'aftNh':function(_0x258f70,_0x4e2252){return _0x258f70>_0x4e2252;},'zkEAH':function(_0x3e1f63,_0x1b87f1){return _0x3e1f63+_0x1b87f1;},'wUXuY':'parameter\x20Length:','nIfyz':',must\x20be\x20less\x20than\x201000!!!'};if(_0x519749['aftNh'](_0x352fcc['length'],0x3e8)){throw new Error(_0x519749['zkEAH'](_0x519749['zkEAH'](_0x519749['wUXuY'],_0x352fcc['length']),_0x519749['nIfyz']));}var _0x3677fd=amf['get_send_uint8_array'](_0x5a63ee,_0x352fcc);this['sendWebSocketBinary'](_0x3677fd['buffer']);}});connect['_instance']=null;connect['instance']=function(){if(!connect['_instance']){connect['_instance']=new connect();}return connect['_instance'];};