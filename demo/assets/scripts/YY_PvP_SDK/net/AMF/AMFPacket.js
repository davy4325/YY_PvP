const AMFMessage=require('\x2e\x2fAMFMessage');const AMFSerializer=require('\x2e\x2fAMFSerializer');const AmfTypes=require('\x2e\x2fAmfTypes');var AMFPacket=cc['Class']({'\x70\x72\x6f\x70\x65\x72\x74\x69\x65\x73':{},'\x63\x74\x6f\x72':function(){cc['log']('AMFPacket');this['inited']=![];},'\x73\x68\x6f\x77\x5f\x69\x6e\x69\x74\x5f\x65\x72\x72\x6f\x72':function(){cc['log']('error\x3a\x20AMFPacket\x20Initialization\x20first\x21\x21\x21');},'\x74\x6f\x53\x74\x72\x69\x6e\x67':function(){return'\x5bObject\x20AMFPacket\x5d';},'\x69\x6e\x69\x74':function(_0x4d93f8){var _0x607a50={'\x69\x66\x4a':function _0x5bb768(_0x587591,_0x4bb815){return _0x587591==_0x4bb815;}};var _0xe78186='0\x7c4\x7c1\x7c3\x7c2\x7c5'['split']('\x7c'),_0x3241da=0x0;while(!![]){switch(_0xe78186[_0x3241da++]){case'0':this['inited']=!![];continue;case'1':this['version']=_0x4d93f8;continue;case'2':this['nheaders']=0x0;continue;case'3':this['headers']={};continue;case'4':if(_0x607a50['ifJ'](_0x4d93f8,null)){_0x4d93f8=amf['AMF3'];}continue;case'5':this['messages']=[];continue;}break;}},'\x68\x65\x61\x64\x65\x72':function(_0x5e4380,_0x536d6c,_0x4b51d6){return new AMFMessage(_0x5e4380,_0x536d6c,_0x4b51d6);},'\x6d\x65\x73\x73\x61\x67\x65':function(_0x52345a,_0x5237dd,_0x5076a1){return new AMFMessage(_0x52345a,_0x5237dd,_0x5076a1);},'\x73\x65\x72\x69\x61\x6c\x69\x7a\x65\x72':function(){return new AMFSerializer(0x3);},'\x61\x64\x64\x48\x65\x61\x64\x65\x72':function(_0x560c24,_0x2d4ba9){var _0x4b3b6a={'\x52\x4d\x61':function _0x408331(_0x37fcf2,_0x4ef4c0){return _0x37fcf2===_0x4ef4c0;}};var _0x33f1ae='0\x7c2\x7c3\x7c4\x7c1'['split']('\x7c'),_0x4c8903=0x0;while(!![]){switch(_0x33f1ae[_0x4c8903++]){case'0':if(!this['inited']){this['show\x5finit\x5ferror']();return;}continue;case'1':return _0x560c24;continue;case'2':if(_0x4b3b6a['RMa'](typeof _0x560c24,'string')){_0x560c24=this['header'](_0x560c24,_0x2d4ba9);}continue;case'3':if(this['headers'][_0x560c24['name']]){}else{this['nheaders']++;}continue;case'4':this['headers'][_0x560c24['name']]=_0x560c24;continue;}break;}},'\x61\x64\x64\x4d\x65\x73\x73\x61\x67\x65':function(_0x5cb886,_0x14dd7d,_0x5dce33){if(!this['inited']){this['show\x5finit\x5ferror']();return;}var _0x2c8664=this['message'](_0x5cb886,_0x14dd7d,_0x5dce33);this['messages']['push'](_0x2c8664);return _0x2c8664;},'\x73\x65\x72\x69\x61\x6c\x69\x7a\x65':function(){var _0x2c1a06={'\x6c\x79\x43':function _0x228e5c(_0x507bf4,_0x2a3f5e){return _0x507bf4<_0x2a3f5e;}};var _0x9c88f3='3\x7c6\x7c0\x7c4\x7c1\x7c5\x7c2'['split']('\x7c'),_0x3d17e0=0x0;while(!![]){switch(_0x9c88f3[_0x3d17e0++]){case'0':_0x1c5ad5['writeU16'](this['nheaders']);continue;case'1':_0x1c5ad5['writeU16'](this['messages']['length']);continue;case'2':return _0x1c5ad5['toString']();continue;case'3':var _0x1c5ad5=this['serializer']();continue;case'4':for(var _0x470cfe in this['headers']){_0x1c5ad5['writeHeader'](this['headers'][_0x470cfe]);}continue;case'5':for(var _0x4ce8f5=0x0;_0x2c1a06['lyC'](_0x4ce8f5,this['messages']['length']);_0x4ce8f5++){_0x1c5ad5['writeMessage'](this['messages'][_0x4ce8f5],this['version']);}continue;case'6':_0x1c5ad5['writeU16'](this['version']);continue;}break;}},'\x73\x74\x61\x74\x69\x63\x73':{'\x64\x65\x73\x65\x72\x69\x61\x6c\x69\x7a\x65':function(_0x3817c3){var _0x3f7d24={'\x55\x53\x68':function _0x25b448(_0x2c1fcb,_0x48c569){return _0x2c1fcb<_0x48c569;},'\x56\x47\x48':function _0x4804c6(_0x19e04a,_0x5efa4d){return _0x19e04a<_0x5efa4d;},'\x4c\x62\x6f':function _0x5f482d(_0x4a9adc,_0x33b4e9){return _0x4a9adc!==_0x33b4e9;},'\x51\x4b\x6d':function _0x3e2ccd(_0x3769af,_0x3ae9e9){return _0x3769af!==_0x3ae9e9;}};var _0x365b0f='0\x7c3\x7c8\x7c7\x7c5\x7c4\x7c1\x7c6\x7c2'['split']('\x7c'),_0x5408f0=0x0;while(!![]){switch(_0x365b0f[_0x5408f0++]){case'0':var _0x419f5b=new AMFPacket();continue;case'1':var _0x390949=_0x367d9b['readU16']();continue;case'2':return _0x419f5b;continue;case'3':var _0x367d9b=_0x419f5b['deserializer'](_0x3817c3);continue;case'4':while(_0x3f7d24['USh'](0x0,_0xb12d0e--)){_0x419f5b['addHeader'](_0x367d9b['readHeader']());}continue;case'5':var _0xb12d0e=_0x367d9b['readU16']();continue;case'6':while(_0x3f7d24['VGH'](0x0,_0x390949--)){_0x419f5b['messages']['push'](_0x367d9b['readMessage']());}continue;case'7':if(_0x3f7d24['Lbo'](_0x33f14f,AmfTypes['AMF0'])&&_0x3f7d24['QKm'](_0x33f14f,AmfTypes['AMF3'])){throw new Error('Invalid\x20AMF\x20packet');}continue;case'8':var _0x33f14f=_0x367d9b['readU16']();continue;}break;}}}});