const AMFMessage=require('./AMFMessage');const AMFSerializer=require('./AMFSerializer');const AmfTypes=require('./AmfTypes');var AMFPacket=cc['Class']({'properties':{},'ctor':function(){var _0x14333e={'Tkmae':'AMFPacket'};cc['log'](_0x14333e['Tkmae']);this['inited']=![];},'show_init_error':function(){var _0x4cfcff={'LLfsS':'error:\x20AMFPacket\x20Initialization\x20first!!!'};cc['log'](_0x4cfcff['LLfsS']);},'toString':function(){var _0x908384={'dNDGv':'[Object\x20AMFPacket]'};return _0x908384['dNDGv'];},'init':function(_0x2d8306){var _0x12092b={'oktSZ':'1|4|2|5|3|0','fbmNQ':function(_0xde3340,_0x49737d){return _0xde3340==_0x49737d;}};var _0x4316e0=_0x12092b['oktSZ']['split']('|'),_0x224b58=0x0;while(!![]){switch(_0x4316e0[_0x224b58++]){case'0':this['messages']=[];continue;case'1':this['inited']=!![];continue;case'2':this['version']=_0x2d8306;continue;case'3':this['nheaders']=0x0;continue;case'4':if(_0x12092b['fbmNQ'](_0x2d8306,null)){_0x2d8306=amf['AMF3'];}continue;case'5':this['headers']={};continue;}break;}},'header':function(_0x38ebf9,_0x4f4680,_0x58d924){return new AMFMessage(_0x38ebf9,_0x4f4680,_0x58d924);},'message':function(_0x566f9f,_0x162254,_0x59cee1){return new AMFMessage(_0x566f9f,_0x162254,_0x59cee1);},'serializer':function(){return new AMFSerializer(0x3);},'addHeader':function(_0x4b6445,_0xf2b375){var _0x5e3625={'woNuC':'2|1|4|3|0','OPJGP':function(_0x4feee0,_0x5b9b05){return _0x4feee0===_0x5b9b05;},'qXrSn':'string'};var _0x192b69=_0x5e3625['woNuC']['split']('|'),_0x42342e=0x0;while(!![]){switch(_0x192b69[_0x42342e++]){case'0':return _0x4b6445;case'1':if(_0x5e3625['OPJGP'](typeof _0x4b6445,_0x5e3625['qXrSn'])){_0x4b6445=this['header'](_0x4b6445,_0xf2b375);}continue;case'2':if(!this['inited']){this['show_init_error']();return;}continue;case'3':this['headers'][_0x4b6445['name']]=_0x4b6445;continue;case'4':if(this['headers'][_0x4b6445['name']]){}else{this['nheaders']++;}continue;}break;}},'addMessage':function(_0x2cab04,_0x538d6c,_0xc72f99){if(!this['inited']){this['show_init_error']();return;}var _0x399f2f=this['message'](_0x2cab04,_0x538d6c,_0xc72f99);this['messages']['push'](_0x399f2f);return _0x399f2f;},'serialize':function(){var _0x5d5f21={'phIoq':'2|0|6|5|1|3|4','ISuAx':function(_0x34c729,_0x3ff53d){return _0x34c729<_0x3ff53d;}};var _0x56d4c1=_0x5d5f21['phIoq']['split']('|'),_0x378d9b=0x0;while(!![]){switch(_0x56d4c1[_0x378d9b++]){case'0':_0x230244['writeU16'](this['version']);continue;case'1':_0x230244['writeU16'](this['messages']['length']);continue;case'2':var _0x230244=this['serializer']();continue;case'3':for(var _0x249d64=0x0;_0x5d5f21['ISuAx'](_0x249d64,this['messages']['length']);_0x249d64++){_0x230244['writeMessage'](this['messages'][_0x249d64],this['version']);}continue;case'4':return _0x230244['toString']();case'5':for(var _0x2f60d9 in this['headers']){_0x230244['writeHeader'](this['headers'][_0x2f60d9]);}continue;case'6':_0x230244['writeU16'](this['nheaders']);continue;}break;}},'statics':{'deserialize':function(_0x281844){var _0x4182ae={'cJRwI':'5|3|0|4|1|2|7|8|6','SSatA':function(_0x41e74d,_0x328a7a){return _0x41e74d<_0x328a7a;},'xOiCH':function(_0x10129a,_0x1aecf6){return _0x10129a!==_0x1aecf6;},'xQaLg':'Invalid\x20AMF\x20packet'};var _0x5117fb=_0x4182ae['cJRwI']['split']('|'),_0x247dee=0x0;while(!![]){switch(_0x5117fb[_0x247dee++]){case'0':var _0x4d21f1=_0x331087['readU16']();continue;case'1':var _0x203fa7=_0x331087['readU16']();continue;case'2':while(_0x4182ae['SSatA'](0x0,_0x203fa7--)){_0x509396['addHeader'](_0x331087['readHeader']());}continue;case'3':var _0x331087=_0x509396['deserializer'](_0x281844);continue;case'4':if(_0x4182ae['xOiCH'](_0x4d21f1,AmfTypes['AMF0'])&&_0x4182ae['xOiCH'](_0x4d21f1,AmfTypes['AMF3'])){throw new Error(_0x4182ae['xQaLg']);}continue;case'5':var _0x509396=new AMFPacket();continue;case'6':return _0x509396;case'7':var _0x16e60a=_0x331087['readU16']();continue;case'8':while(_0x4182ae['SSatA'](0x0,_0x16e60a--)){_0x509396['messages']['push'](_0x331087['readMessage']());}continue;}break;}}}});