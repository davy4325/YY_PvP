const net_queue=require('./net_queue');const amf=require('./AMF/amf');let connect=cc['Class']({'properties':{'net_status':{'default':null,'type':cc['Label']}},'ctor':function(){this['_is_connected']=![];},'init':function(_0x57c2cb){this['_wsiSendBinary']=null;this['url']=_0x57c2cb;},'bytesToInt2':function(_0x2303d7,_0x14d333){var _0x316f46={'XOIzp':function(_0x4f1a7a,_0xc5b09a){return _0x4f1a7a|_0xc5b09a;},'jBwvh':function(_0x1419b3,_0x2bb047){return _0x1419b3<<_0x2bb047;}};let _0x826c78=_0x316f46['XOIzp'](_0x2303d7,_0x316f46['jBwvh'](_0x14d333,0x8));return _0x826c78;},'close':function(){this['_wsiSendBinary']['close']();},'set_disconnected':function(){this['_is_connected']=![];},'is_connected':function(){return this['_is_connected'];},'connect_to':function(_0x2b1239){var _0x414a73={'sxFrK':function(_0x1df745,_0x3a38da){return _0x1df745==_0x3a38da;},'Bvzjk':function(_0x31079d,_0x1ea446){return _0x31079d!=_0x1ea446;},'dmtKC':'WebSocket\x0a发送二进制WS已打开.','jfUQO':function(_0x5694c5,_0x381891){return _0x5694c5<_0x381891;},'qwvBR':'WebSocket\x0a收到响应.','uKIdX':function(_0x519d77,_0x1c8d08){return _0x519d77!=_0x1c8d08;},'YpzDe':'WebSocket\x0a发送二进制遇到错误.','fgzLv':'WebSocket\x0awebsocket\x20实例已关闭.','ydRGn':function(_0x291432,_0x58b3c5){return _0x291432==_0x58b3c5;},'wEDgO':'arraybuffer'};if(_0x414a73['ydRGn'](this['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}this['init'](_0x2b1239);let _0x5d17b6=this['net_status'];let _0xea11c7=this;this['_wsiSendBinary']=new WebSocket(this['url']);this['_wsiSendBinary']['binaryType']=_0x414a73['wEDgO'];this['_wsiSendBinary']['onopen']=function(_0x3c5411){if(_0x414a73['sxFrK'](_0xea11c7['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}_0xea11c7['_is_connected']=!![];net_queue['instance']()['push'](0xa,'');if(_0x414a73['Bvzjk'](_0x5d17b6,null)){_0x5d17b6['string']=_0x414a73['dmtKC'];}};this['_wsiSendBinary']['onmessage']=function(_0x302c5a){let _0x304c2f=new Uint8Array(_0x302c5a['data']);let _0x46f4da=_0xea11c7['bytesToInt2'](_0x304c2f[0x0],_0x304c2f[0x1]);let _0x76a493='';for(let _0x1d6d33=0x2;_0x414a73['jfUQO'](_0x1d6d33,_0x304c2f['length']);_0x1d6d33++){_0x76a493+=String['fromCharCode'](_0x304c2f[_0x1d6d33]);}net_queue['instance']()['push'](_0x46f4da,_0x76a493);if(_0x414a73['Bvzjk'](_0x5d17b6,null)){_0x5d17b6['string']=_0x414a73['qwvBR'];}};this['_wsiSendBinary']['onerror']=function(_0x4a2e70){_0xea11c7['_is_connected']=![];net_queue['instance']()['push'](0xc,'');if(_0x414a73['uKIdX'](_0x5d17b6,null)){_0x5d17b6['string']=_0x414a73['YpzDe'];}};this['_wsiSendBinary']['onclose']=function(_0x209680){_0xea11c7['_is_connected']=![];net_queue['instance']()['push'](0xb,'');if(_0x414a73['uKIdX'](_0x5d17b6,null)){_0x5d17b6['string']=_0x414a73['fgzLv'];}_0xea11c7['_wsiSendBinary']=null;};},'sendWebSocketBinary':function(_0x423c09){var _0x16ab4d={'LEJJK':function(_0x20d3c4,_0x46e7fd){return _0x20d3c4===_0x46e7fd;},'mZeeQ':function(_0x38387f,_0x1223d1){return _0x38387f!=_0x1223d1;},'XjjXs':'WebSocket\x0a发送二进制WS等待中...','AIkHX':'send\x20binary\x20websocket\x20instance\x20wasn\x27t\x20ready...','sYUoA':function(_0x18e010,_0x461cbc){return _0x18e010!=_0x461cbc;},'Wmpzv':function(_0x2d5e9f,_0xa54f51){return _0x2d5e9f+_0xa54f51;},'zPhcT':'WebSocket\x0a'};if(!this['_wsiSendBinary']){return;}let _0x291aca=this['net_status'];if(_0x16ab4d['LEJJK'](this['_wsiSendBinary']['readyState'],WebSocket['OPEN'])){if(_0x16ab4d['mZeeQ'](_0x291aca,null)){_0x291aca['string']=_0x16ab4d['XjjXs'];}this['_wsiSendBinary']['send'](_0x423c09);}else{let _0xd1bc3b=_0x16ab4d['AIkHX'];if(_0x16ab4d['sYUoA'](_0x291aca,null)){_0x291aca['string']=_0x16ab4d['Wmpzv'](_0x16ab4d['zPhcT'],_0xd1bc3b);}}},'send_cmd':function(_0x5a42b6,_0x31bb0f){var _0xf61e5e={'PBwaD':function(_0x3ae9dd,_0x4da643){return _0x3ae9dd>_0x4da643;},'IopJe':function(_0x4a2a58,_0x55aa4f){return _0x4a2a58+_0x55aa4f;},'jtZvI':'parameter\x20Length:','UTCgT':',must\x20be\x20less\x20than\x201000!!!'};if(_0xf61e5e['PBwaD'](_0x31bb0f['length'],0x3e8)){throw new Error(_0xf61e5e['IopJe'](_0xf61e5e['IopJe'](_0xf61e5e['jtZvI'],_0x31bb0f['length']),_0xf61e5e['UTCgT']));}let _0x17cbeb=amf['get_send_uint8_array'](_0x5a42b6,_0x31bb0f);this['sendWebSocketBinary'](_0x17cbeb['buffer']);},'uuid':function(_0x515ed8,_0x152e99){var _0x367dc6={'FsEsR':'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz','FOblM':function(_0x4d0c2c,_0x23cddd){return _0x4d0c2c<_0x23cddd;},'rMmjs':function(_0x237a88,_0x10b179){return _0x237a88|_0x10b179;},'eksKN':function(_0x3b8ef1,_0x1a0528){return _0x3b8ef1*_0x1a0528;},'VwPFH':function(_0x1693ab,_0x3fb88d){return _0x1693ab<_0x3fb88d;},'eBHJc':function(_0x4905e9,_0x7b24a1){return _0x4905e9*_0x7b24a1;},'qEElN':function(_0x3e1dcf,_0x5df21d){return _0x3e1dcf==_0x5df21d;},'FhhNK':function(_0x4c64c9,_0x56f0c6){return _0x4c64c9|_0x56f0c6;},'dlRms':function(_0x31dd47,_0x3c5b65){return _0x31dd47&_0x3c5b65;}};let _0x38bd40=_0x367dc6['FsEsR']['split']('');let _0xb4817c=[],_0x5eb189;_0x152e99=_0x152e99||_0x38bd40['length'];if(_0x515ed8){for(_0x5eb189=0x0;_0x367dc6['FOblM'](_0x5eb189,_0x515ed8);_0x5eb189++)_0xb4817c[_0x5eb189]=_0x38bd40[_0x367dc6['rMmjs'](0x0,_0x367dc6['eksKN'](Math['random'](),_0x152e99))];}else{let _0x514225;_0xb4817c[0x8]=_0xb4817c[0xd]=_0xb4817c[0x12]=_0xb4817c[0x17]='-';_0xb4817c[0xe]='4';for(_0x5eb189=0x0;_0x367dc6['VwPFH'](_0x5eb189,0x24);_0x5eb189++){if(!_0xb4817c[_0x5eb189]){_0x514225=_0x367dc6['rMmjs'](0x0,_0x367dc6['eBHJc'](Math['random'](),0x10));_0xb4817c[_0x5eb189]=_0x38bd40[_0x367dc6['qEElN'](_0x5eb189,0x13)?_0x367dc6['FhhNK'](_0x367dc6['dlRms'](_0x514225,0x3),0x8):_0x514225];}}}return _0xb4817c['join']('');}});connect['_instance']=null;connect['instance']=function(){if(!connect['_instance']){connect['_instance']=new connect();}return connect['_instance'];};