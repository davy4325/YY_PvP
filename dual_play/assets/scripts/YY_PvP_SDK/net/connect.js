const net_queue=require('./net_queue');const amf=require('./AMF/amf');var connect=cc['Class']({'properties':{'net_status':{'default':null,'type':cc['Label']}},'ctor':function(){this['is_connected']=![];},'init':function(_0x1e3db8){this['_wsiSendBinary']=null;this['url']=_0x1e3db8;},'bytesToInt2':function(_0x339c7e,_0x1c1045){var _0x32b26c={'QlneW':function(_0x4dd198,_0x1b8697){return _0x4dd198|_0x1b8697;},'xrLeq':function(_0x264ba6,_0x2c60d9){return _0x264ba6<<_0x2c60d9;}};var _0x5e9463=_0x32b26c['QlneW'](_0x339c7e,_0x32b26c['xrLeq'](_0x1c1045,0x8));return _0x5e9463;},'close':function(){this['_wsiSendBinary']['close']();},'set_disconnected':function(){this['is_connected']=![];},'connect_to':function(_0x3c5a1b){var _0x316800={'mvbSm':'0|1|5|6|7|3|2|8|4|10|9','lJzpv':function(_0x195611,_0x2b03f4){return _0x195611==_0x2b03f4;},'aAhYa':function(_0x15337f,_0x50391c){return _0x15337f!=_0x50391c;},'BsotJ':'WebSocket\x0a发送二进制WS已打开.','SKrWA':'5|3|4|0|1|2','qrOwB':function(_0x4ab3a7,_0x14b605){return _0x4ab3a7<_0x14b605;},'ManLv':function(_0x5a5257,_0x4e65c3){return _0x5a5257!=_0x4e65c3;},'HtltZ':'WebSocket\x0a收到响应.','xbzqn':'WebSocket\x0a发送二进制遇到错误.','IiZec':'WebSocket\x0awebsocket\x20实例已关闭.','htFBw':'arraybuffer'};var _0x4b46b6=_0x316800['mvbSm']['split']('|'),_0xd17b44=0x0;while(!![]){switch(_0x4b46b6[_0xd17b44++]){case'0':var _0x4900f1={'nnwzC':function(_0x5d93c3,_0x523c3a){return _0x316800['lJzpv'](_0x5d93c3,_0x523c3a);},'nrxSZ':function(_0x685cd3,_0x5bfdb6){return _0x316800['aAhYa'](_0x685cd3,_0x5bfdb6);},'rvpJG':_0x316800['BsotJ'],'NIrRh':_0x316800['SKrWA'],'bSpuR':function(_0x440d7e,_0x55544c){return _0x316800['qrOwB'](_0x440d7e,_0x55544c);},'HYYOL':function(_0x2ebb75,_0x1c8b8c){return _0x316800['ManLv'](_0x2ebb75,_0x1c8b8c);},'OIygU':_0x316800['HtltZ'],'iEwVp':_0x316800['xbzqn'],'NPGPb':_0x316800['IiZec']};continue;case'1':if(_0x316800['lJzpv'](this['is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}continue;case'2':this['_wsiSendBinary']['binaryType']=_0x316800['htFBw'];continue;case'3':this['_wsiSendBinary']=new WebSocket(this['url']);continue;case'4':this['_wsiSendBinary']['onmessage']=function(_0x43edfe){var _0x1aa8fa=_0x4900f1['NIrRh']['split']('|'),_0x366eb2=0x0;while(!![]){switch(_0x1aa8fa[_0x366eb2++]){case'0':for(var _0x2af859=0x2;_0x4900f1['bSpuR'](_0x2af859,_0x5c26d1['length']);_0x2af859++){_0x5eae96+=String['fromCharCode'](_0x5c26d1[_0x2af859]);}continue;case'1':net_queue['instance']()['push'](_0x16bd80,_0x5eae96);continue;case'2':if(_0x4900f1['HYYOL'](_0x1e1a79,null)){_0x1e1a79['string']=_0x4900f1['OIygU'];}continue;case'3':var _0x16bd80=_0x2cf639['bytesToInt2'](_0x5c26d1[0x0],_0x5c26d1[0x1]);continue;case'4':var _0x5eae96='';continue;case'5':var _0x5c26d1=new Uint8Array(_0x43edfe['data']);continue;}break;}};continue;case'5':this['init'](_0x3c5a1b);continue;case'6':var _0x1e1a79=this['net_status'];continue;case'7':var _0x2cf639=this;continue;case'8':this['_wsiSendBinary']['onopen']=function(_0x36710c){if(_0x4900f1['nnwzC'](_0x2cf639['is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}_0x2cf639['is_connected']=!![];net_queue['instance']()['push'](0xa,'');if(_0x4900f1['nrxSZ'](_0x1e1a79,null)){_0x1e1a79['string']=_0x4900f1['rvpJG'];}};continue;case'9':this['_wsiSendBinary']['onclose']=function(_0x56ffe8){_0x2cf639['is_connected']=![];net_queue['instance']()['push'](0xb,'');if(_0x4900f1['HYYOL'](_0x1e1a79,null)){_0x1e1a79['string']=_0x4900f1['NPGPb'];}_0x2cf639['_wsiSendBinary']=null;};continue;case'10':this['_wsiSendBinary']['onerror']=function(_0x569d69){_0x2cf639['is_connected']=![];net_queue['instance']()['push'](0xc,'');if(_0x4900f1['HYYOL'](_0x1e1a79,null)){_0x1e1a79['string']=_0x4900f1['iEwVp'];}};continue;}break;}},'sendWebSocketBinary':function(_0x14278d){var _0x4f6227={'iVERI':function(_0x13ff8f,_0x4bb593){return _0x13ff8f===_0x4bb593;},'YDyoK':function(_0x2421fa,_0x57ad15){return _0x2421fa!=_0x57ad15;},'MIKsv':'WebSocket\x0a发送二进制WS等待中...','GhIDh':'send\x20binary\x20websocket\x20instance\x20wasn\x27t\x20ready...','ImXzN':function(_0x1de6e2,_0x45e868){return _0x1de6e2+_0x45e868;},'itUtL':'WebSocket\x0a'};if(!this['_wsiSendBinary']){return;}var _0x942f6e=this['net_status'];if(_0x4f6227['iVERI'](this['_wsiSendBinary']['readyState'],WebSocket['OPEN'])){if(_0x4f6227['YDyoK'](_0x942f6e,null)){_0x942f6e['string']=_0x4f6227['MIKsv'];}this['_wsiSendBinary']['send'](_0x14278d);}else{var _0x3f8f54=_0x4f6227['GhIDh'];if(_0x4f6227['YDyoK'](_0x942f6e,null)){_0x942f6e['string']=_0x4f6227['ImXzN'](_0x4f6227['itUtL'],_0x3f8f54);}}},'send_cmd':function(_0x3d9c14,_0x2b8b32){var _0x3468e8={'vvnxO':function(_0x46f16c,_0x12a872){return _0x46f16c>_0x12a872;},'pimLB':function(_0x364774,_0x530a82){return _0x364774+_0x530a82;},'AKGbc':'parameter\x20Length:','LtDfh':',must\x20be\x20less\x20than\x201000!!!'};if(_0x3468e8['vvnxO'](_0x2b8b32['length'],0x3e8)){throw new Error(_0x3468e8['pimLB'](_0x3468e8['pimLB'](_0x3468e8['AKGbc'],_0x2b8b32['length']),_0x3468e8['LtDfh']));}var _0x3395c1=amf['get_send_uint8_array'](_0x3d9c14,_0x2b8b32);this['sendWebSocketBinary'](_0x3395c1['buffer']);}});connect['_instance']=null;connect['instance']=function(){if(!connect['_instance']){connect['_instance']=new connect();}return connect['_instance'];};