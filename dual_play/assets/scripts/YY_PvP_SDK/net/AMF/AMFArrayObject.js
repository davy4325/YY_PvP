const AmfTypes=require('./AmfTypes');const AMFElements=require('./AMFElements');const amf=require('./amf');var AMFObject=cc.Class({properties:{type:AmfTypes.AMF3_OBJECT,childrens:[],},ctor:function(){this.amf_code=''},add:function(val,name){var elem=new AMFElements();elem.init(val,name);this.childrens.push(elem)},get_value:function(name){for(var i=0;i<this.childrens.length;i++){var elem=this.childrens[i];if(elem.name===name){return elem.val}}return null},new_deserializer:function(data){if(data.length<3){return}this._deserializer=amf.new_deserialize(data)},set_deserializer:function(deserializer){this._deserializer=deserializer},read:function(max_col){var deserializer=this._deserializer;var object_flag=amf.deserialize_object_flag(deserializer);var object_ref_flag=amf.deserialize_object_ref_flag(deserializer);var empty_string_flag=amf.deserialize_empty_string_flag(deserializer);if(object_flag!=AmfTypes.AMF3_OBJECT||object_ref_flag!=0x0B||empty_string_flag!=1){return 0}var col_num=0;while(amf.deserialize_length(deserializer)>1){var name=amf.deserialize_name(deserializer);var value=amf.deserialize_value(deserializer);this.add(value,name);if(amf.deserialize_is_end_empty_string_flag(deserializer)){amf.deserialize_empty_string_flag(deserializer)}col_num++;if((max_col>0&&col_num>=max_col)||amf.deserialize_is_array_end(deserializer)){break}}return col_num},});