const AmfTypes=require('./AmfTypes');const BinaryParser=require('./BinaryParser');const utf8=require('./utf8');var AMFDeserializer=cc['Class']({'properties':{},'ctor':function(){this['inited']=![];},'show_init_error':function(){var _0x892fd3={'TVfka':'error:\x20AMFDeserializer\x20Initialization\x20first!!!'};cc['log'](_0x892fd3['TVfka']);},'init':function(_0x55dd37){var _0x4e2392={'lygVa':'4|0|3|5|2|1'};var _0x213cd2=_0x4e2392['lygVa']['split']('|'),_0x1dd551=0x0;while(!![]){switch(_0x213cd2[_0x1dd551++]){case'0':this['version']=_0x55dd37;continue;case'1':this['leParser']=this['bin_parser'](![],!![]);continue;case'2':this['beParser']=this['bin_parser'](!![],!![]);continue;case'3':this['s']='';continue;case'4':this['inited']=!![];continue;case'5':this['resetRefs']();continue;}break;}},'toString':function(){return this['s'];},'resetRefs':function(){if(!this['inited']){this['show_init_error']();return;}this['refObj']=[];this['refStr']=[];this['refTra']=[];},'bin_parser':function(_0xf0db60,_0x4a32ab){if(!this['inited']){this['show_init_error']();return;}var _0x6c9904=new BinaryParser();_0x6c9904['init'](_0xf0db60,_0x4a32ab);return _0x6c9904;},'writeHeader':function(_0x1931ec){var _0x475b2={'eRZaa':'5|3|4|6|8|0|2|1|7','UdGXJ':'ÿÿÿÿ'};var _0x468c64=_0x475b2['eRZaa']['split']('|'),_0x3841f5=0x0;while(!![]){switch(_0x468c64[_0x3841f5++]){case'0':this['s']+=_0x475b2['UdGXJ'];continue;case'1':this['version']=_0x1f4f71;continue;case'2':var _0x5db032=this['writeValue'](_0x1931ec['value']);continue;case'3':var _0x1f4f71=this['version'];continue;case'4':this['version']=AmfTypes['AMF0'];continue;case'5':this['resetRefs']();continue;case'6':this['writeUTF8'](_0x1931ec['name']);continue;case'7':return _0x5db032;case'8':this['writeU8'](_0x1931ec['mustunderstand']?0x1:0x0);continue;}break;}},'writeMessage':function(_0x592e4b,_0x4cf7a7){var _0x26ae3b={'JQtQE':'10|0|8|3|5|7|6|2|4|9|1','WtMpu':function(_0x366ffa,_0x1a6bd5){return _0x366ffa===_0x1a6bd5;},'UgiNs':'ÿÿÿÿ'};var _0x1e91b4=_0x26ae3b['JQtQE']['split']('|'),_0x1cc8b1=0x0;while(!![]){switch(_0x1e91b4[_0x1cc8b1++]){case'0':var _0x2c249c=this['version'];continue;case'1':return this['s'];case'2':this['version']=_0x4cf7a7;continue;case'3':this['writeUTF8'](_0x592e4b['requestURI']);continue;case'4':this['writeValue'](_0x592e4b['value']);continue;case'5':this['writeUTF8'](_0x592e4b['responseURI']);continue;case'6':if(_0x26ae3b['WtMpu'](_0x4cf7a7,AmfTypes['AMF3'])){this['writeU8'](AmfTypes['AMF0_AMV_PLUS']);}continue;case'7':this['s']+=_0x26ae3b['UgiNs'];continue;case'8':this['version']=AmfTypes['AMF0'];continue;case'9':this['version']=_0x2c249c;continue;case'10':this['resetRefs']();continue;}break;}},'writeName':function(_0x327917){var _0x15c9d1={'rdhBi':function(_0x5c8e57,_0x22e3c8){return _0x5c8e57===_0x22e3c8;},'KwypC':'string'};if(_0x15c9d1['rdhBi'](_0x15c9d1['KwypC'],typeof _0x327917)){return this['writeUTF8'](_0x327917,![]);}return this['writeUndefined']();},'writeValue':function(_0x3fce51){var _0x5123d1={'xHGuZ':'3|4|5|0|1|7|6|2','VddBX':function(_0x452c67,_0x492d05){return _0x452c67===_0x492d05;},'IKutn':'number','ZerAg':function(_0x3079ea,_0x387af3){return _0x3079ea===_0x387af3;},'XIDLs':'boolean','jFVff':function(_0x2ccea6,_0x1547aa){return _0x2ccea6===_0x1547aa;},'kyQYQ':function(_0x12dcc9,_0x2ed3ed){return _0x12dcc9===_0x2ed3ed;},'QzohM':function(_0x37f7eb,_0xb4e478){return _0x37f7eb===_0xb4e478;},'IEMnQ':'string','xHrii':function(_0x3f4a1e,_0x51a215){return _0x3f4a1e instanceof _0x51a215;},'VUyQE':'function'};var _0x31180a=_0x5123d1['xHGuZ']['split']('|'),_0x1c85ef=0x0;while(!![]){switch(_0x31180a[_0x1c85ef++]){case'0':if(_0x5123d1['VddBX'](_0x5123d1['IKutn'],typeof _0x3fce51)){return this['writeNumber'](_0x3fce51,!![]);}continue;case'1':if(_0x5123d1['ZerAg'](_0x5123d1['XIDLs'],typeof _0x3fce51)){return this['writeBool'](_0x3fce51);}continue;case'2':return this['writeObject'](_0x3fce51);case'3':if(_0x5123d1['jFVff'](_0x3fce51,undefined)){return this['writeUndefined']();}continue;case'4':if(_0x5123d1['kyQYQ'](_0x3fce51,null)){return this['writeNull']();}continue;case'5':if(_0x5123d1['QzohM'](_0x5123d1['IEMnQ'],typeof _0x3fce51)){return this['writeUTF8'](_0x3fce51,!![]);}continue;case'6':if(_0x5123d1['xHrii'](_0x3fce51,Date)){return this['writeDate'](_0x3fce51);}continue;case'7':if(_0x5123d1['QzohM'](_0x5123d1['VUyQE'],typeof _0x3fce51['push'])){return this['writeArray'](_0x3fce51);}continue;}break;}},'writeAmfcode':function(_0xbe3350){return this['writeAmf'](_0xbe3350,!![]);},'writeUndefined':function(){var _0x1940fc={'CLbne':function(_0x511f49,_0x51fccc){return _0x511f49===_0x51fccc;}};var _0x3613f5=_0x1940fc['CLbne'](this['version'],AmfTypes['AMF3'])?AmfTypes['AMF3_UNDEFINED']:AmfTypes['AMF0_UNDEFINED'];return this['writeU8'](_0x3613f5);},'writeNull':function(){var _0x713a6b={'pGjvy':function(_0x9cf09c,_0x5027e5){return _0x9cf09c===_0x5027e5;}};var _0x528106=_0x713a6b['pGjvy'](this['version'],AmfTypes['AMF3'])?AmfTypes['AMF3_NULL']:AmfTypes['AMF0_NULL'];return this['writeU8'](_0x528106);},'writeBool':function(_0xac0e06){var _0x9a59b2={'vWhBG':function(_0x2eef82,_0x2fd394){return _0x2eef82===_0x2fd394;}};if(_0x9a59b2['vWhBG'](this['version'],AmfTypes['AMF3'])){var _0xef6788=_0xac0e06?AmfTypes['AMF3_TRUE']:AmfTypes['AMF3_FALSE'];return this['writeU8'](_0xef6788);}else{this['writeU8'](AmfTypes['AMF0_BOOLEAN']);return this['writeU8'](_0xac0e06?0x1:0x0);}},'writeUTF8':function(_0x38a618,_0x57f0a0){var _0xa055af={'BKZDN':'2|4|0|1|3','SBwMo':function(_0x436ed2,_0x3f1b6f){return _0x436ed2===_0x3f1b6f;},'nNrBL':function(_0x1c356d,_0x5a161f){return _0x1c356d|_0x5a161f;},'twTXZ':function(_0x48532f,_0x18b66e){return _0x48532f<<_0x18b66e;},'kglcI':function(_0x58337b,_0x491368){return _0x58337b!==_0x491368;},'lEoyJ':'string'};var _0x2a1a31=_0xa055af['BKZDN']['split']('|'),_0x114452=0x0;while(!![]){switch(_0x2a1a31[_0x114452++]){case'0':var _0x292fab=_0x1d6438['length'];continue;case'1':if(_0xa055af['SBwMo'](this['version'],AmfTypes['AMF3'])){if(_0x57f0a0){this['writeU8'](AmfTypes['AMF3_STRING']);}var _0x17d313=_0xa055af['nNrBL'](_0xa055af['twTXZ'](_0x292fab,0x1),0x1);this['writeU29'](_0x17d313);}else{if(_0x57f0a0){this['writeU8'](AmfTypes['AMF0_STRING']);}this['writeU16'](_0x292fab);}continue;case'2':if(_0xa055af['kglcI'](typeof _0x38a618,_0xa055af['lEoyJ'])){_0x38a618='';}continue;case'3':return this['s']+=_0x1d6438;case'4':var _0x1d6438=utf8['expand'](_0x38a618);continue;}break;}},'writeAmf':function(_0x2f79b8,_0x527f73){var _0x3cfe18={'CClbX':'1|3|2|0|4','EGTmS':function(_0x5a8ded,_0x3f58dd){return _0x5a8ded===_0x3f58dd;},'DFXyA':function(_0x53b3a2,_0x557f0b){return _0x53b3a2|_0x557f0b;},'bhEJh':function(_0x1e1b4d,_0x2e118a){return _0x1e1b4d<<_0x2e118a;},'aYmog':function(_0x4376c3,_0x1c13f7){return _0x4376c3!==_0x1c13f7;},'udODY':'string'};var _0x112d88=_0x3cfe18['CClbX']['split']('|'),_0x35047f=0x0;while(!![]){switch(_0x112d88[_0x35047f++]){case'0':if(_0x3cfe18['EGTmS'](this['version'],AmfTypes['AMF3'])){if(_0x527f73){this['writeU8'](AmfTypes['AMF3_STRING']);}var _0x426aed=_0x3cfe18['DFXyA'](_0x3cfe18['bhEJh'](_0x342c46,0x1),0x1);this['writeU29'](_0x426aed);}else{if(_0x527f73){this['writeU8'](AmfTypes['AMF0_STRING']);}this['writeU16'](_0x342c46);}continue;case'1':if(_0x3cfe18['aYmog'](typeof _0x2f79b8,_0x3cfe18['udODY'])){_0x2f79b8='';}continue;case'2':var _0x342c46=_0x443b88['length'];continue;case'3':var _0x443b88=_0x2f79b8;continue;case'4':return this['s']+=_0x443b88;}break;}},'writeArray':function(_0x1d651b){var _0x48eff4={'AazTh':function(_0x2c2579,_0x55e63f){return _0x2c2579===_0x55e63f;},'SCzyh':'1|2|3|4|0|5|6','bhupN':function(_0x47835c,_0x3abf19){return _0x47835c|_0x3abf19;},'bOaWL':function(_0x236cd9,_0x505d63){return _0x236cd9<<_0x505d63;},'qpmlZ':function(_0x37faf6,_0x11d031){return _0x37faf6!==_0x11d031;},'pyUdi':function(_0x290ef9,_0x18ca0c){return _0x290ef9<<_0x18ca0c;},'bFsGL':function(_0x269d22,_0x63bb53){return _0x269d22<_0x63bb53;}};var _0xe76091=_0x1d651b['length'];if(_0x48eff4['AazTh'](this['version'],AmfTypes['AMF3'])){var _0xd6294=_0x48eff4['SCzyh']['split']('|'),_0x30ae82=0x0;while(!![]){switch(_0xd6294[_0x30ae82++]){case'0':var _0x14a527=_0x48eff4['bhupN'](_0x48eff4['bOaWL'](_0xe76091,0x1),0x1);continue;case'1':this['writeU8'](AmfTypes['AMF3_ARRAY']);continue;case'2':var _0x5530f1=this['refObj']['indexOf'](_0x1d651b);continue;case'3':if(_0x48eff4['qpmlZ'](_0x5530f1,-0x1)){return this['writeU29'](_0x48eff4['pyUdi'](_0x5530f1,0x1));}continue;case'4':this['refObj']['push'](_0x1d651b);continue;case'5':this['writeU29'](_0x14a527);continue;case'6':this['writeUTF8']('');continue;}break;}}else{this['writeU8'](AmfTypes['AMF0_STRICT_ARRAY']);this['writeU32'](_0xe76091);}for(var _0x8cdfbd=0x0;_0x48eff4['bFsGL'](_0x8cdfbd,_0xe76091);_0x8cdfbd++){this['writeValue'](_0x1d651b[_0x8cdfbd]);}return this['s'];},'writeObject':function(_0x383609){var _0x130ff8={'WvdSc':'6|7|8|0|5|3|4|2|1','gcreu':function(_0x5b5286,_0x366f89){return _0x5b5286!==_0x366f89;},'ioXjB':function(_0x2abaa9,_0x1cae1f){return _0x2abaa9<<_0x1cae1f;},'MMWIa':function(_0x54e37f,_0xa08583){return _0x54e37f!==_0xa08583;},'kIMAb':'function','WIWLB':function(_0x19548c,_0x4cf7e3){return _0x19548c!==_0x4cf7e3;},'bRgBR':'This\x20library\x20doesn\x27t\x20support\x20AMF0\x20objects,\x20use\x20AMF3'};var _0x55a008=_0x130ff8['WvdSc']['split']('|'),_0x33cc55=0x0;while(!![]){switch(_0x55a008[_0x33cc55++]){case'0':if(_0x130ff8['gcreu'](_0x5e7e00,-0x1)){return this['writeU29'](_0x130ff8['ioXjB'](_0x5e7e00,0x1));}continue;case'1':return this['writeUTF8']('');case'2':for(var _0x3ed304 in _0x383609){if(_0x130ff8['MMWIa'](typeof _0x383609[_0x3ed304],_0x130ff8['kIMAb'])){this['writeUTF8'](_0x3ed304);this['writeValue'](_0x383609[_0x3ed304]);}}continue;case'3':this['writeU29'](0xb);continue;case'4':this['writeUTF8'](null);continue;case'5':this['refObj']['push'](_0x383609);continue;case'6':if(_0x130ff8['WIWLB'](this['version'],AmfTypes['AMF3'])){throw new Error(_0x130ff8['bRgBR']);}continue;case'7':this['writeU8'](AmfTypes['AMF3_OBJECT']);continue;case'8':var _0x5e7e00=this['refObj']['indexOf'](_0x383609);continue;}break;}},'writeDate':function(_0x588d3a){var _0x466220={'cYjAW':function(_0x53aa83,_0xf926aa){return _0x53aa83!==_0xf926aa;},'YJIaw':'This\x20library\x20doesn\x27t\x20support\x20AMF0\x20objects,\x20use\x20AMF3'};if(_0x466220['cYjAW'](this['version'],AmfTypes['AMF3'])){throw new Error(_0x466220['YJIaw']);}this['writeU8'](AmfTypes['AMF3_DATE']);this['writeU29'](0x1);return this['writeDouble'](_0x588d3a['getTime']());},'writeNumber':function(_0x2ca88a,_0x300372){var _0x36ab81={'RlcRe':function(_0x57abc8,_0x4143b0){return _0x57abc8(_0x4143b0);},'RfDeY':function(_0x58623,_0x357c67){return _0x58623===_0x357c67;},'qFGXI':function(_0x4f6ab4,_0x5b5b6b){return _0x4f6ab4>=_0x5b5b6b;},'gsKDl':function(_0x3a75dc,_0x3f0e8e){return _0x3a75dc<_0x3f0e8e;}};var _0xa0cd24=_0x36ab81['RlcRe'](parseInt,_0x2ca88a);if(_0x36ab81['RfDeY'](_0xa0cd24,_0x2ca88a)&&_0x36ab81['qFGXI'](_0xa0cd24,0x0)&&_0x36ab81['gsKDl'](_0xa0cd24,0x20000000)){return this['writeU29'](_0x2ca88a,_0x300372);}return this['writeDouble'](_0x2ca88a,_0x300372);},'writeDouble':function(_0x51fe98,_0x1b1655){var _0x595522={'rpdUG':function(_0x54858e,_0x4936d9){return _0x54858e===_0x4936d9;},'uRyEY':function(_0x32e2bb,_0x23e795){return _0x32e2bb(_0x23e795);},'zXaSR':'ø'};if(_0x1b1655){var _0x4e7362=_0x595522['rpdUG'](this['version'],AmfTypes['AMF3'])?AmfTypes['AMF3_DOUBLE']:AmfTypes['AMF0_NUMBER'];this['writeU8'](_0x4e7362);}if(_0x595522['uRyEY'](isNaN,_0x51fe98)){this['s']+=_0x595522['zXaSR'];}else{this['s']+=this['beParser']['fromDouble'](_0x51fe98);}return this['s'];},'writeU8':function(_0x15714b){return this['s']+=this['beParser']['fromByte'](_0x15714b);},'writeU16':function(_0x37763c){return this['s']+=this['beParser']['fromWord'](_0x37763c);},'writeU32':function(_0x598f7e){return this['s']+=this['beParser']['fromDWord'](_0x598f7e);},'writeU29':function(_0x3a1fe1,_0x4fcc67){var _0x78c9ee={'pSnpo':'4|1|2|0|3|6|5','hmdpO':function(_0x5b2806,_0x15f5ef){return _0x5b2806<_0x15f5ef;},'LfIWC':function(_0x88cbb1,_0x3da120){return _0x88cbb1&_0x3da120;},'yKDEO':function(_0x4461a7,_0x3dd0ef){return _0x4461a7|_0x3dd0ef;},'plkTq':function(_0x375c4a,_0xfe5075){return _0x375c4a>>_0xfe5075;},'qAUaY':function(_0x50065a,_0x40e3f9){return _0x50065a&_0x40e3f9;},'UNpZO':function(_0x1f514b,_0x472cfd){return _0x1f514b&_0x472cfd;},'kdaxw':function(_0x3c0d49,_0xb51c19){return _0x3c0d49|_0xb51c19;},'Jowgr':function(_0x391ce6,_0x3ed000){return _0x391ce6<_0x3ed000;},'bwtXj':function(_0x40a4c7,_0x15af52){return _0x40a4c7&_0x15af52;},'aPzgm':function(_0x515c85,_0x50b199){return _0x515c85|_0x50b199;},'EegYI':function(_0x494eed,_0x13c842){return _0x494eed&_0x13c842;},'mEtLt':function(_0x220398,_0x230e56){return _0x220398&_0x230e56;},'JutEb':function(_0x535df0,_0x462098){return _0x535df0&_0x462098;},'nqPcP':function(_0x30d7ae,_0x2d084f){return _0x30d7ae+_0x2d084f;},'IPlur':function(_0x421ac9,_0x7af31){return _0x421ac9+_0x7af31;},'eBwkh':'U29\x20range\x20error,\x20','Xtbkz':'\x20>\x200x1FFFFFFF','WTVQO':function(_0x28bde8,_0x4b8031){return _0x28bde8<_0x4b8031;},'KFViU':'\x20<\x200','ytemj':function(_0x29b49f,_0x326f61){return _0x29b49f!=_0x326f61;},'PbPAS':function(_0x26b039,_0x246578){return _0x26b039!=_0x246578;}};var _0x2da88d=_0x78c9ee['pSnpo']['split']('|'),_0x39b521=0x0;while(!![]){switch(_0x2da88d[_0x39b521++]){case'0':if(_0x4fcc67){this['writeU8'](AmfTypes['AMF3_INTEGER']);}continue;case'1':var _0xf13cee,_0x387bef,_0x4a8f36,_0x3a81a4;continue;case'2':if(_0x78c9ee['hmdpO'](_0x3a1fe1,0x80)){_0xf13cee=_0x3a1fe1;}else if(_0x78c9ee['hmdpO'](_0x3a1fe1,0x4000)){_0x387bef=_0x78c9ee['LfIWC'](_0x3a1fe1,0x7f);_0xf13cee=_0x78c9ee['yKDEO'](0x80,_0x78c9ee['LfIWC'](_0x78c9ee['plkTq'](_0x3a1fe1,0x7),0x7f));}else if(_0x78c9ee['hmdpO'](_0x3a1fe1,0x200000)){_0x4a8f36=_0x78c9ee['qAUaY'](_0x3a1fe1,0x7f);_0x387bef=_0x78c9ee['yKDEO'](0x80,_0x78c9ee['UNpZO'](_0x3a1fe1>>=0x7,0x7f));_0xf13cee=_0x78c9ee['kdaxw'](0x80,_0x78c9ee['UNpZO'](_0x3a1fe1>>=0x7,0x7f));}else if(_0x78c9ee['Jowgr'](_0x3a1fe1,0x20000000)){_0x3a81a4=_0x78c9ee['bwtXj'](_0x3a1fe1,0xff);_0x4a8f36=_0x78c9ee['aPzgm'](0x80,_0x78c9ee['EegYI'](_0x3a1fe1>>=0x8,0x7f));_0x387bef=_0x78c9ee['aPzgm'](0x80,_0x78c9ee['mEtLt'](_0x3a1fe1>>=0x7,0x7f));_0xf13cee=_0x78c9ee['aPzgm'](0x80,_0x78c9ee['JutEb'](_0x3a1fe1>>=0x7,0x7f));}else{throw new Error(_0x78c9ee['nqPcP'](_0x78c9ee['IPlur'](_0x78c9ee['eBwkh'],_0x3a1fe1),_0x78c9ee['Xtbkz']));}continue;case'3':this['writeU8'](_0xf13cee);continue;case'4':if(_0x78c9ee['WTVQO'](_0x3a1fe1,0x0)){throw new Error(_0x78c9ee['IPlur'](_0x78c9ee['IPlur'](_0x78c9ee['eBwkh'],_0x3a1fe1),_0x78c9ee['KFViU']));}continue;case'5':return this['s'];case'6':if(_0x78c9ee['ytemj'](_0x387bef,null)){this['writeU8'](_0x387bef);if(_0x78c9ee['ytemj'](_0x4a8f36,null)){this['writeU8'](_0x4a8f36);if(_0x78c9ee['PbPAS'](_0x3a81a4,null)){this['writeU8'](_0x3a81a4);}}}continue;}break;}}});