const net_queue=require('./net_queue');const amf=require('./AMF/amf');var connect=cc['Class']({'properties':{'net_status':{'default':null,'type':cc['Label']}},'ctor':function(){this['_is_connected']=![];},'init':function(_0x483db0){this['_wsiSendBinary']=null;this['url']=_0x483db0;},'bytesToInt2':function(_0x1bcff8,_0xe4a250){var _0x497d41={'YknlK':function(_0x16178f,_0x1e35c7){return _0x16178f|_0x1e35c7;},'yiJwq':function(_0x2ccfb7,_0x403ac3){return _0x2ccfb7<<_0x403ac3;}};var _0x56be30=_0x497d41['YknlK'](_0x1bcff8,_0x497d41['yiJwq'](_0xe4a250,0x8));return _0x56be30;},'close':function(){this['_wsiSendBinary']['close']();},'set_disconnected':function(){this['_is_connected']=![];},'is_connected':function(){return this['_is_connected'];},'connect_to':function(_0x1dfdba){var _0x8b2e57={'vfxTn':'8|5|4|9|0|7|10|1|2|6|3','DZFPF':function(_0x3de9a9,_0x33f958){return _0x3de9a9==_0x33f958;},'OkMXu':function(_0x42fb6f,_0xe80187){return _0x42fb6f!=_0xe80187;},'nGAIN':'WebSocket\x0a发送二进制WS已打开.','bJTRP':'1|4|2|0|3|5','UJBoC':function(_0x56edd6,_0x4f4bf6){return _0x56edd6<_0x4f4bf6;},'MWkcc':function(_0xb3a4c0,_0x427a1a){return _0xb3a4c0!=_0x427a1a;},'DsxeM':'WebSocket\x0a收到响应.','esEaI':'WebSocket\x0a发送二进制遇到错误.','iLBUs':'4|2|0|1|3','sBKXo':'WebSocket\x0awebsocket\x20实例已关闭.','SlAdg':function(_0x1b2d83,_0x512d88){return _0x1b2d83!==_0x512d88;},'lDmfa':'arraybuffer'};var _0x5c0bec=_0x8b2e57['vfxTn']['split']('|'),_0x3fee26=0x0;while(!![]){switch(_0x5c0bec[_0x3fee26++]){case'0':var _0x521be7=this;continue;case'1':this['_wsiSendBinary']['onopen']=function(_0xd8f433){if(_0x5c48d7['YdbQO'](_0x521be7['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}_0x521be7['_is_connected']=!![];net_queue['instance']()['push'](0xa,'');if(_0x5c48d7['zxEdd'](_0x2cc061,null)){_0x2cc061['string']=_0x5c48d7['jaSvZ'];}};continue;case'2':this['_wsiSendBinary']['onmessage']=function(_0x68a4eb){var _0x2c03d1=_0x5c48d7['vuWHJ']['split']('|'),_0x446161=0x0;while(!![]){switch(_0x2c03d1[_0x446161++]){case'0':for(var _0x478415=0x2;_0x5c48d7['OuWgc'](_0x478415,_0x267a92['length']);_0x478415++){_0x1a7698+=String['fromCharCode'](_0x267a92[_0x478415]);}continue;case'1':var _0x267a92=new Uint8Array(_0x68a4eb['data']);continue;case'2':var _0x1a7698='';continue;case'3':net_queue['instance']()['push'](_0x4b5068,_0x1a7698);continue;case'4':var _0x4b5068=_0x521be7['bytesToInt2'](_0x267a92[0x0],_0x267a92[0x1]);continue;case'5':if(_0x5c48d7['igsQV'](_0x2cc061,null)){_0x2cc061['string']=_0x5c48d7['wcqpb'];}continue;}break;}};continue;case'3':this['_wsiSendBinary']['onclose']=function(_0x327b8b){var _0x4c2c09=_0x5c48d7['hRVTI']['split']('|'),_0x1ca8a2=0x0;while(!![]){switch(_0x4c2c09[_0x1ca8a2++]){case'0':net_queue['instance']()['push'](0xb,'');continue;case'1':if(_0x5c48d7['EerZj'](_0x2cc061,null)){_0x2cc061['string']=_0x5c48d7['PShXH'];}continue;case'2':if(_0x5c48d7['RnCsL'](_0x327b8b['currentTarget'],_0x521be7['_wsiSendBinary'])||_0x5c48d7['RnCsL'](_0x521be7['_wsiSendBinary'],_0x327b8b['target'])){return;}continue;case'3':_0x521be7['_wsiSendBinary']=null;continue;case'4':_0x521be7['_is_connected']=![];continue;}break;}};continue;case'4':this['init'](_0x1dfdba);continue;case'5':if(_0x8b2e57['DZFPF'](this['_is_connected'],!![])){net_queue['instance']()['push'](0xd,'');return;}continue;case'6':this['_wsiSendBinary']['onerror']=function(_0x4e70e7){_0x521be7['_is_connected']=![];net_queue['instance']()['push'](0xc,'');if(_0x5c48d7['EerZj'](_0x2cc061,null)){_0x2cc061['string']=_0x5c48d7['VKDfi'];}};continue;case'7':this['_wsiSendBinary']=new WebSocket(this['url']);continue;case'8':var _0x5c48d7={'YdbQO':function(_0x45d797,_0x50b1de){return _0x8b2e57['DZFPF'](_0x45d797,_0x50b1de);},'zxEdd':function(_0x47859b,_0x10fb7a){return _0x8b2e57['OkMXu'](_0x47859b,_0x10fb7a);},'jaSvZ':_0x8b2e57['nGAIN'],'vuWHJ':_0x8b2e57['bJTRP'],'OuWgc':function(_0x53ee93,_0x394231){return _0x8b2e57['UJBoC'](_0x53ee93,_0x394231);},'igsQV':function(_0x17f351,_0x586c3d){return _0x8b2e57['MWkcc'](_0x17f351,_0x586c3d);},'wcqpb':_0x8b2e57['DsxeM'],'EerZj':function(_0x4da96b,_0xd8b247){return _0x8b2e57['MWkcc'](_0x4da96b,_0xd8b247);},'VKDfi':_0x8b2e57['esEaI'],'hRVTI':_0x8b2e57['iLBUs'],'PShXH':_0x8b2e57['sBKXo'],'RnCsL':function(_0x5b9398,_0x22fc9e){return _0x8b2e57['SlAdg'](_0x5b9398,_0x22fc9e);}};continue;case'9':var _0x2cc061=this['net_status'];continue;case'10':this['_wsiSendBinary']['binaryType']=_0x8b2e57['lDmfa'];continue;}break;}},'sendWebSocketBinary':function(_0x286c13){var _0x334d9e={'HoBVo':function(_0x51bc4b,_0x24635d){return _0x51bc4b===_0x24635d;},'UgURy':function(_0x2a0b44,_0x1e44cc){return _0x2a0b44!=_0x1e44cc;},'XVScZ':'WebSocket\x0a发送二进制WS等待中...','JULeV':'send\x20binary\x20websocket\x20instance\x20wasn\x27t\x20ready...','oVjGk':function(_0x20cf67,_0x4016c4){return _0x20cf67!=_0x4016c4;},'ayMGo':function(_0x1d5b35,_0x119e4e){return _0x1d5b35+_0x119e4e;},'dLbtD':'WebSocket\x0a'};if(!this['_wsiSendBinary']){return;}var _0x5f0d15=this['net_status'];if(_0x334d9e['HoBVo'](this['_wsiSendBinary']['readyState'],WebSocket['OPEN'])){if(_0x334d9e['UgURy'](_0x5f0d15,null)){_0x5f0d15['string']=_0x334d9e['XVScZ'];}this['_wsiSendBinary']['send'](_0x286c13);}else{var _0x1a1166=_0x334d9e['JULeV'];if(_0x334d9e['oVjGk'](_0x5f0d15,null)){_0x5f0d15['string']=_0x334d9e['ayMGo'](_0x334d9e['dLbtD'],_0x1a1166);}}},'send_cmd':function(_0x3863f5,_0x1604b3){var _0x3b3b11={'JDEfc':function(_0x3f2923,_0xc05f3b){return _0x3f2923>_0xc05f3b;},'qEEXg':function(_0x32c4f9,_0x443def){return _0x32c4f9+_0x443def;},'NtPVs':'parameter\x20Length:','xXBzz':',must\x20be\x20less\x20than\x201000!!!'};if(_0x3b3b11['JDEfc'](_0x1604b3['length'],0x3e8)){throw new Error(_0x3b3b11['qEEXg'](_0x3b3b11['qEEXg'](_0x3b3b11['NtPVs'],_0x1604b3['length']),_0x3b3b11['xXBzz']));}var _0x52ea6e=amf['get_send_uint8_array'](_0x3863f5,_0x1604b3);this['sendWebSocketBinary'](_0x52ea6e['buffer']);}});connect['_instance']=null;connect['instance']=function(){if(!connect['_instance']){connect['_instance']=new connect();}return connect['_instance'];};